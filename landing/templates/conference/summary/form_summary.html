<div class="row">
    <input type="hidden" value="{{ id }}" name="pk">
    <input type="hidden" name="action" value="{{ action }}"/>
    {% for field in form %}
        {% if field.is_hidden %}
            {{ field }}
        {% else %}
            <div class="col-lg-{{ field.field.widget.attrs.col }}">
                <div class="form-group">
                    <label class="form-label" for="id_{{ field.name }}">{{ field.label }}:</label><br>
                    {{ field }}
                    <div class="invalid-feedback" id="errorMessage{{ field.name }}"></div>
                </div>
            </div>
        {% endif %}
    {% endfor %}
</div>

<div class="ln_solid"></div>

<div class="form-group">
    <div class="col-md-12 col-sm-12 col-xs-12 col-md-offset-3 text-right">
        <a href="javascript:;" class="btn btn-danger" data-dismiss="modal"><i
                class="fa fa-window-close"></i>
            Cancelar</a>
        <button type="submit"
                class="btn btn-success">
            <i class="fa fa-save"></i> Guardar
        </button>
    </div>
</div>

{{ form.media }}
<script>

    $(document).ready(function () {
        $.fn.select2.defaults.set('language', 'es');
        $('.jselect2').select2();
    });
</script>

<script type="text/javascript">
    $(document).ready(function () {
        var imagenprincipal = $('#id_image').dropify({
            messages: {
                default: 'Arrastre y suelte un archivo o haga clic aquí.',
                replace: 'Arrastre y suelte un archivo o haga clic aquí.',
                remove: 'Eliminar',
            },
            imgFileExtensions: ["jpg", "jpeg", "png", "tiff", "jfif", "svg"]
        });        
        var file_example = $('#id_file_example').dropify({
            messages: {
                default: 'Arrastre y suelte un archivo o haga clic aquí.',
                replace: 'Arrastre y suelte un archivo o haga clic aquí.',
                remove: 'Eliminar',
            },
            imgFileExtensions: ["jpg", "jpeg", "png", "tiff", "jfif", "svg"]
        }); 
        var photo = $('#id_photo').dropify({
            messages: {
                default: 'Arrastre y suelte un archivo o haga clic aquí.',
                replace: 'Arrastre y suelte un archivo o haga clic aquí.',
                remove: 'Eliminar',
            },
            imgFileExtensions: ["jpg", "jpeg", "png", "tiff", "jfif", "svg"]
        });        
        var icon = $('#id_icon').dropify({
            messages: {
                default: 'Arrastre y suelte un archivo o haga clic aquí.',
                replace: 'Arrastre y suelte un archivo o haga clic aquí.',
                remove: 'Eliminar',
            },
            imgFileExtensions: ["jpg", "jpeg", "png", "tiff", "jfif", "svg"]
        });

        function toggleTextFields() {
            // Habilitar/Deshabilitar y hacer requerido o no, según el checkbox
            if ($('#id_view_committe').is(':checked')) {
                $('#id_text_committe').prop("disabled", true).prop("required", false);  // Deshabilita y no es requerido
            } else {
                $('#id_text_committe').prop("disabled", false).prop("required", true);  // Habilita y es requerido
            }

            if ($('#id_view_topics').is(':checked')) {
                $('#id_text_topics').prop("disabled", true).prop("required", false);  // Deshabilita y no es requerido
            } else {
                $('#id_text_topics').prop("disabled", false).prop("required", true);  // Habilita y es requerido
            }

            if ($('#id_view_sponsors').is(':checked')) {
                $('#id_text_sponsors').prop("disabled", true).prop("required", false);
            } else {
                $('#id_text_sponsors').prop("disabled", false).prop("required", true);
            }

            if ($('#id_view_call_for_papers').is(':checked')) {
                $('#id_text_call_for_papers').prop("disabled", true).prop("required", false);
            } else {
                $('#id_text_call_for_papers').prop("disabled", false).prop("required", true);
            }
        }


        // Ejecutar la función al cargar la página
        toggleTextFields();

        // Detectar cambios en los checkboxes y actualizar los campos de texto
        $('#id_view_committe, #id_view_topics, #id_view_sponsors, #id_view_call_for_papers').change(function () {
            toggleTextFields();
        });
    });
</script>
